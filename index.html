<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tiempo Meira - Bicos de Fío</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Variable para controlar el tamaño del texto globalmente */
            --base-size: 1.8vh; 
        }

        body {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Outfit', sans-serif;
            /* CAMBIO CLAVE: Usamos 100% de la ventana, no píxeles fijos */
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* Evita barras de scroll */
            color: #ffffff;
            
            /* Fondo Pedregal adaptado */
            background-color: #222;
            background-image: url('fondo.jpg'); 
            background-repeat: no-repeat;
            /* cover asegura que llene todo sin deformarse */
            background-size: cover; 
            /* center bottom prioriza las rocas de abajo */
            background-position: center bottom; 
        }

        .overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            /* Gradiente más oscuro abajo para que se lea bien el texto sobre las rocas */
            background: linear-gradient(to bottom, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.5) 50%, rgba(0,0,0,0.9) 100%);
            z-index: 1;
        }

        .container {
            position: relative;
            z-index: 2;
            height: 100%;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            /* Padding porcentual para que no toque los bordes */
            padding: 5vh 5vw; 
            box-sizing: border-box;
        }

        /* --- HEADER --- */
        header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            padding-bottom: 2vh;
        }
        .location h1 {
            margin: 0;
            font-size: 5rem; /* Relativo al root */
            font-size: 6vh;  /* Relativo a la altura de pantalla */
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 700;
            line-height: 1;
        }
        .location p {
            margin: 1vh 0 0;
            font-size: 2.5vh;
            opacity: 0.9;
            font-weight: 200;
        }
        .clock {
            text-align: right;
        }
        .time {
            font-size: 6vh;
            font-weight: 200;
            line-height: 1;
        }
        .date {
            font-size: 2vh;
            opacity: 0.8;
            text-transform: uppercase;
            margin-top: 1vh;
        }

        /* --- HERO (Temperatura) --- */
        .hero-weather {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1; /* Ocupa el espacio disponible */
            text-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .hero-icon {
            font-size: 15vh; /* Se adapta a la altura */
            margin-bottom: 2vh;
            color: #ffcc00; 
        }
        .hero-temp {
            font-size: 22vh; /* Gigante pero escalable */
            font-weight: 700;
            line-height: 0.9;
            margin-left: -2vh; /* Corrección óptica */
        }
        .hero-desc {
            font-size: 4vh;
            text-transform: capitalize;
            font-weight: 200;
            margin-top: 2vh;
        }

        /* --- GRID DETALLES --- */
        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 2vw;
            margin-bottom: 4vh;
        }
        .detail-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2vh 1vw;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .detail-icon { font-size: 3vh; margin-bottom: 1vh; opacity: 0.9; }
        .detail-value { font-size: 3vh; font-weight: 700; }
        .detail-label { font-size: 1.5vh; opacity: 0.8; text-transform: uppercase; margin-top: 0.5vh;}

        /* --- FORECAST --- */
        .forecast-container {
            background: rgba(0, 0, 0, 0.5); /* Más oscuro para contraste con rocas */
            border-radius: 30px;
            padding: 3vh 4vw;
            margin-bottom: 2vh;
        }
        .forecast-title {
            font-size: 2.5vh;
            margin-bottom: 2vh;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.9;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            padding-bottom: 1vh;
        }
        .forecast-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5vh 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 2.5vh;
        }
        .forecast-row:last-child { border-bottom: none; }
        .f-day { width: 35%; text-transform: capitalize; font-weight: 400; }
        .f-icon { width: 20%; text-align: center; color: #ddd; }
        .f-temps { width: 45%; text-align: right; font-weight: 700; }
        .low-temp { opacity: 0.6; font-weight: 200; margin-left: 10px; font-size: 0.9em; }

    </style>
</head>
<body>
    <div class="overlay"></div>
    <div class="container">
        
        <header>
            <div class="location">
                <h1>MEIRA</h1>
                <p>Lugo, Galicia</p>
            </div>
            <div class="clock">
                <div class="time" id="clock-time">--:--</div>
                <div class="date" id="clock-date">...</div>
            </div>
        </header>

        <div class="hero-weather">
            <div class="hero-icon" id="current-icon"><i class="fas fa-circle-notch fa-spin"></i></div>
            <div class="hero-temp" id="current-temp">--°</div>
            <div class="hero-desc" id="current-desc">Cargando...</div>
        </div>

        <div class="details-grid">
            <div class="detail-card">
                <div class="detail-icon"><i class="fas fa-wind"></i></div>
                <div class="detail-value" id="wind-speed">--</div>
                <div class="detail-label">Viento</div>
            </div>
            <div class="detail-card">
                <div class="detail-icon"><i class="fas fa-tint"></i></div>
                <div class="detail-value" id="humidity">--%</div>
                <div class="detail-label">Humedad</div>
            </div>
            <div class="detail-card">
                <div class="detail-icon"><i class="fas fa-temperature-high"></i></div>
                <div class="detail-value" id="feels-like">--°</div>
                <div class="detail-label">Sensación</div>
            </div>
        </div>

        <div class="forecast-container">
            <div class="forecast-title">Previsión 5 Días</div>
            <div id="forecast-list">
                </div>
        </div>

    </div>

    <script>
        const LAT = 43.2132;
        const LON = -7.2934;
        
        function getWeatherIcon(code) {
            switch(true) {
                case (code === 0): return 'fa-sun'; 
                case (code >= 1 && code <= 3): return 'fa-cloud-sun'; 
                case (code >= 45 && code <= 48): return 'fa-smog'; 
                case (code >= 51 && code <= 55): return 'fa-cloud-rain'; 
                case (code >= 56 && code <= 67): return 'fa-umbrella'; 
                case (code >= 71 && code <= 77): return 'fa-snowflake'; 
                case (code >= 80 && code <= 82): return 'fa-cloud-showers-heavy'; 
                case (code >= 85 && code <= 86): return 'fa-snowflake'; 
                case (code >= 95): return 'fa-bolt'; 
                default: return 'fa-cloud';
            }
        }

        function getWeatherDesc(code) {
            const descriptions = {
                0: "Despejado", 1: "Poco nuboso", 2: "Nublado", 3: "Cubierto",
                45: "Niebla", 48: "Escarcha", 51: "Llovizna", 53: "Llovizna", 55: "Llovizna",
                61: "Lluvia", 63: "Lluvia", 65: "Lluvia fuerte", 71: "Nieve", 95: "Tormenta"
            };
            return descriptions[code] || "Variable";
        }

        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
            let dateString = now.toLocaleDateString('es-ES', { weekday: 'long', day: 'numeric', month: 'long' });
            dateString = dateString.charAt(0).toUpperCase() + dateString.slice(1);
            document.getElementById('clock-time').innerText = timeString;
            document.getElementById('clock-date').innerText = dateString;
        }

        async function fetchWeather() {
            try {
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=auto`;
                const response = await fetch(url);
                const data = await response.json();

                const current = data.current;
                document.getElementById('current-temp').innerText = Math.round(current.temperature_2m) + "°";
                document.getElementById('current-desc').innerText = getWeatherDesc(current.weather_code);
                document.getElementById('wind-speed').innerText = Math.round(current.wind_speed_10m);
                document.getElementById('humidity').innerText = current.relative_humidity_2m + "%";
                document.getElementById('feels-like').innerText = Math.round(current.apparent_temperature) + "°";

                const iconClass = getWeatherIcon(current.weather_code);
                const iconContainer = document.getElementById('current-icon');
                iconContainer.innerHTML = `<i class="fas ${iconClass}"></i>`;
                iconContainer.style.color = (current.weather_code <= 1) ? '#ffcc00' : '#e0e0e0';

                const daily = data.daily;
                let forecastHTML = '';
                for(let i = 1; i <= 5; i++) {
                    const date = new Date(daily.time[i]);
                    let dayName = date.toLocaleDateString('es-ES', { weekday: 'long' });
                    dayName = dayName.charAt(0).toUpperCase() + dayName.slice(1);
                    const max = Math.round(daily.temperature_2m_max[i]);
                    const min = Math.round(daily.temperature_2m_min[i]);
                    const icon = getWeatherIcon(daily.weather_code[i]);
                    forecastHTML += `
                        <div class="forecast-row">
                            <div class="f-day">${dayName}</div>
                            <div class="f-icon"><i class="fas ${icon}"></i></div>
                            <div class="f-temps">${max}° <span class="low-temp">${min}°</span></div>
                        </div>`;
                }
                document.getElementById('forecast-list').innerHTML = forecastHTML;
            } catch (error) { console.error("Error:", error); }
        }

        setInterval(updateClock, 1000);
        updateClock();
        fetchWeather();
        setInterval(fetchWeather, 900000); 
    </script>
</body>
</html>
